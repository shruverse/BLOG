{% from "bootstrap5/form.html" import render_form %}
{% include "header.html" %}

<section class="main-content mt-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <!-- Blog Post Image -->
        <img src="{{post.img_url}}" class="img-fluid blog-post-image mt-5" alt="Blog Image"> <!-- Added class blog-post-image -->

        <!-- Blog Post Title -->
        <h2 class="text-center mt-4">{{ post.title }}</h2>

        <!-- Blog Post Date -->
        <p class="text-center">{{ post.date }}</p>

        <!-- Main Content of the Blog Post -->
        <div class="mt-4">
          <div class="col-lg-8 mx-auto"> <!-- Adjusted width for paragraphs -->
           {{ post.body|safe }}
             {% if current_user.id == 1 %}
            <div class="d-flex justify-content-end mb-4">
          <a class="btn btn-primary float-right" href="{{url_for('edit_post', post_id=post.id)}}">Edit Post</a>
        </div>
            <div class="d-flex justify-content-end mb-4">
          <a class="btn btn-primary float-right" href="{{url_for('delete_post', post_id=post.id)}}">Delete Post</a>
        </div>
            {% endif %}
          </div>
        </div>

         <!-- Comments Area -->
        <!-- Load the CKEditor -->
        {{ ckeditor.load() }}
        <!-- Configure it with the name of the form field from CommentForm -->
        {{ ckeditor.config(name='comment_text') }}
        <!-- Create the wtf quick form from CommentForm -->
        {{ render_form(form, novalidate=True, button_map={"submit": "primary"}) }}
        <div class="comment">
          <ul class="commentList">
            <!-- Show all comments -->
            {% for comment in post.comments: %}
            <li>
              <div class="commenterImage">
                <img
                  src="{{ comment.comment_author.email | gravatar }}"
                />
              </div>
              <div class="commentText" style="font-weight: 900;">
                {{comment.text|safe}}
                <span class="sub-text">{{comment.comment_author.name}}</span>
              </div>
            </li>
            {% endfor %}
          </ul>

        </div>

      </div>
    </div>
  </div>
</section>

{% include "footer.html" %}
